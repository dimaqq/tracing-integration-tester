---
name: hexanator
type: charm
title: Charmed Gubernator
summary: High-performance, distributed rate-limiting service
description: |
  Gubernator is a high-performance, distributed rate-limiting service.

# FIXME: move to 24.04 when there's a working Juju release
bases:
  - build-on:
      - name: ubuntu
        channel: "22.04"
        architectures: [amd64]
    run-on:
      - name: ubuntu
        channel: "22.04"
        architectures: [amd64, arm64, riscv64]

# (Optional) Configuration options for the charm
# FIXME: push the log evel into pebble config
config:
  options:
    log-level:
      description: |
        Acceptable values are: "info", "debug", "warning", "error" and "critical"
      default: "info"
      type: string

# Your workloadâ€™s containers.
containers:
  gubernator:
    resource: gubernator


# This field populates the Resources tab on Charmhub.
resources:
  gubernator:
    # FIXME can I use `oci-archive`?
    type: oci-image
    description: Gubernator Rock with Pebble
    # How to tell `charmcraft` where to take the image from?
    file: gubernator_2.7.5_arm64.rock
    upstream-source: gubernator-io/gubernator

links:
  source: https://github.com/gubernator-io/gubernator
  charm: https://github.com/dimaqq/hexanator
